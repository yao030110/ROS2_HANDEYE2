private:
  void publish_target_pose()
  {
    if (!has_pose) {
      RCLCPP_WARN(this->get_logger(), "No pose data yet.");
      return;
    }

    auto target_pose = geometry_msgs::msg::PoseStamped();

    tf2::Quaternion q(ori_x, ori_y, ori_z, ori_w);
    tf2::Matrix3x3(q).getRPY(roll, pitch, yaw);

    double adjusted_roll  = roll;
    double adjusted_pitch = pitch;
    double adjusted_yaw;

    if (flag) {
      adjusted_yaw = yaw - 0.1;
      flag = 0;
    } else {
      adjusted_yaw = yaw + 0.1;
      flag = 1;
    }

    tf2::Quaternion q_adj;
    q_adj.setRPY(adjusted_roll, adjusted_pitch, adjusted_yaw);
    q_adj.normalize();

    target_pose.header.stamp = this->now();
    target_pose.header.frame_id = "base";
    target_pose.pose.position.x = pos_x;
    target_pose.pose.position.y = pos_y;
    target_pose.pose.position.z = pos_z;
    target_pose.pose.orientation.x = q_adj.x();
    target_pose.pose.orientation.y = q_adj.y();
    target_pose.pose.orientation.z = q_adj.z();
    target_pose.pose.orientation.w = q_adj.w();

    publisher_->publish(target_pose);

    RCLCPP_INFO(this->get_logger(), "Published: x=%.4f, y=%.4f, z=%.4f, yaw=%.3f",
                pos_x, pos_y, pos_z, adjusted_yaw);
  }